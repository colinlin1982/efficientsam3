# EdgeSAM-style prompt-in-the-loop distillation (adapted for SAM3)
#
# Key idea:
# - Still TRAIN ONLY the student image trunk (SAM3 heads remain frozen)
# - But mimic EdgeSAM's training dynamics:
#   - box-only vs point-only mixing
#   - iterative refinement by adding extra points from teacherâ†”student disagreement
#
# This file inherits most defaults from `base_geometry_finetune.yaml` and only overrides
# the "EdgeSAM-style" knobs. You should still set:
# - DATA_PATH, TEACHER_EMBED_PATH, SAM3_CHECKPOINT, PRETRAINED, OUTPUT
#

BASE: ['base_geometry_finetune.yaml']

DISTILL:
  # Train under interactive-like conditions (usually 1 object prompt at a time)
  MAX_PROMPTS: 1

  # Mix box-only vs point-only like EdgeSAM
  PROMPT_MIX: true
  PROMPT_MIX_PROB_BOX: 0.5

  # Distill the teacher-selected best mask (closest to interactive "pick best")
  SELECT_BEST_MASK: true

  # Iterative refinement (EdgeSAM uses 2)
  DECODE_ITERS: 2

  # Add 1 refinement point each refinement step (set MAX>1 for multiple)
  POINTS_PER_REFINE_ITER_MIN: 1
  POINTS_PER_REFINE_ITER_MAX: 1
  ITER_ON_BOX: true
  TEACHER_MASK_THRESHOLD: 0.0


